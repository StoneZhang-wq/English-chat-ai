# 记忆功能说明

## 通俗易懂的解释

想象一下，这个AI就像一个**有记忆的朋友**，它会记住你们之前的对话，下次聊天时还能想起来。

### 📝 记忆是如何工作的？

#### 1. **对话进行中**（临时记忆）
- 当你和AI聊天时，所有的对话内容会先保存在 `session_temp.json` 这个临时文件里
- 就像你在草稿纸上记笔记一样，这是"正在写的笔记"

#### 2. **对话结束后**（永久记忆）
- 当你点击"结束对话"按钮时，系统会：
  1. **生成摘要**：AI会把这次对话总结成一段文字，就像写日记一样
     - 例如："用户名叫张磊，喜欢打篮球，想要变得成功"
  2. **保存到日记**：这段摘要会保存到 `diary.json` 文件里
  3. **提取信息**：从对话中提取关键信息（姓名、兴趣、目标等），更新到 `user_profile.json`
  4. **清空临时文件**：把草稿纸（临时文件）清空，准备下次对话

#### 3. **下次对话时**（使用记忆）
- 当你再次打开应用时，系统会：
  1. **读取日记**：从 `diary.json` 中读取之前的对话摘要
  2. **读取档案**：从 `user_profile.json` 中读取你的基本信息
  3. **告诉AI**：把这些记忆信息告诉AI，就像给AI看之前的聊天记录
  4. **AI记住你**：AI就能自然地叫你的名字，提起你之前说过的话

### 📁 三个文件的作用

#### 1. `diary.json` - 对话日记
```
就像一本日记本，记录每次对话的摘要：
- 今天（2026-01-02）：用户名叫张磊，喜欢打篮球...
- 昨天（2026-01-01）：用户提到想要学习英语...
```
**作用**：让AI知道之前聊过什么，可以主动提及

#### 2. `user_profile.json` - 用户档案
```
就像一张个人信息卡：
- 姓名：张磊
- 职业：国际部GTM
- 兴趣：打篮球、看电影、玩游戏
- 目标：变得很成功
```
**作用**：快速让AI了解你的基本信息

#### 3. `session_temp.json` - 临时会话（对话进行时才有）
```
就像草稿纸，记录当前这次对话的所有内容
对话结束后会被清空
```
**作用**：在对话进行中临时保存，结束后生成摘要

### 🔄 完整流程示例

**第一次对话：**
1. 你说："我叫张磊，我喜欢打篮球"
2. 对话进行中 → 保存到 `session_temp.json`
3. 点击"结束对话" → 
   - 生成摘要："用户名叫张磊，喜欢打篮球"
   - 保存到 `diary.json`
   - 提取信息：姓名=张磊，兴趣=打篮球
   - 更新到 `user_profile.json`

**第二次对话（第二天）：**
1. 系统启动 → 读取 `diary.json` 和 `user_profile.json`
2. 告诉AI："用户叫张磊，昨天提到喜欢打篮球"
3. AI回复："张磊，你昨天提到喜欢打篮球，最近有去打吗？"
4. 你感受到：AI记得我！

### ✨ 关键特点

1. **实事求是**：只记录你明确说过的话，不会编造
2. **不设字数限制**：信息多就写多，信息少就写少
3. **自然提及**：AI会说"你昨天提到..."，不会说"在日记中提到..."
4. **简洁回复**：AI会像朋友聊天一样，每次回复控制在50-100字左右

### 🎯 为什么这样设计？

- **简单**：不需要复杂的分类和结构，就是一段文字摘要
- **自然**：AI直接读文字，就像读日记一样自然
- **灵活**：不设字数限制，有多少信息就记录多少
- **真实**：只记录真实对话，不会虚构内容

---

**总结**：就像AI有一个小本子，每次对话结束后写一段摘要，下次对话时翻翻小本子，就能想起之前聊过什么了！

