# 记忆功能说明

## 通俗易懂的解释

AI 会通过**用户档案**和**当前会话临时数据**来保持对话连贯，不再使用对话日记（diary）存储。

### 📝 记忆是如何工作的？

#### 1. **对话进行中**（临时记忆）
- 当你和 AI 聊天时，对话内容会先保存在 `session_temp.json` 临时文件中
- 用于当次会话的上下文与结束时的信息提取

#### 2. **对话结束后**
- 点击「结束对话」时，系统会：
  1. **提取信息**：从对话中提取关键信息（姓名、兴趣、目标等），更新到 `user_profile.json`
  2. **清空临时文件**：清空 `session_temp.json`，准备下次对话  
- 不再生成或保存对话日记摘要

#### 3. **下次对话时**
- 系统会：
  1. **读取档案**：从 `user_profile.json` 读取你的基本信息
  2. **结合当前时间**：把时间信息与用户档案一起提供给 AI
  3. **AI 使用档案**：能自然使用你的名字、兴趣等信息

### 📁 相关文件

#### 1. `user_profile.json` - 用户档案
- 姓名、职业、兴趣、目标、英语水平等
- 作用：让 AI 了解你的基本信息并在对话中使用

#### 2. `session_temp.json` - 临时会话
- 仅当次对话进行中存在，记录当前对话内容
- 对话结束后会被清空，用于结束时的信息提取

#### 3. `npc_learn_progress.json` - 场景学习进度
- 记录各场景下已学完的 NPC，用于解锁沉浸式场景等

---

**总结**：记忆依赖用户档案与当次会话临时数据，不再使用对话日记（diary）存储。
